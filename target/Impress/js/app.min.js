if(Function.prototype.bind||(Function.prototype.bind=function(e){"use strict";if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,o=function(){},a=function(){return i.apply(this instanceof o&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,a.prototype=new o,a}),function(){"use strict";var e=Object.prototype,t=e.__defineGetter__,i=e.__defineSetter__,o=e.__lookupGetter__,a=e.__lookupSetter__,r=e.hasOwnProperty;t&&i&&o&&a&&(Object.defineProperty||(Object.defineProperty=function(e,s,n){if(arguments.length<3)throw new TypeError("Arguments not optional");if(s+="",r.call(n,"value")&&(o.call(e,s)||a.call(e,s)||(e[s]=n.value),r.call(n,"get")||r.call(n,"set")))throw new TypeError("Cannot specify an accessor and a value");if(!(n.writable&&n.enumerable&&n.configurable))throw new TypeError("This implementation of Object.defineProperty does not support false for configurable, enumerable, or writable.");return n.get&&t.call(e,s,n.get),n.set&&i.call(e,s,n.set),e}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,t){if(arguments.length<2)throw new TypeError("Arguments not optional.");t+="";var i={configurable:!0,enumerable:!0,writable:!0},s=o.call(e,t),n=a.call(e,t);return r.call(e,t)?s||n?(delete i.writable,i.get=i.set=void 0,s&&(i.get=s),n&&(i.set=n),i):(i.value=e[t],i):i}),Object.defineProperties||(Object.defineProperties=function(e,t){var i;for(i in t)r.call(t,i)&&Object.defineProperty(e,i,t[i])}))}(),!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(Element.prototype,"dataset")&&Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var propDescriptor={enumerable:!0,get:function(){"use strict";var e,t,i,o,a,r,s=this,n=this.attributes,l=n.length,d=function(e){return e.charAt(1).toUpperCase()},p=function(){return this},c=function(e,t){return void 0!==t?this.setAttribute(e,t):this.removeAttribute(e)};try{({}).__defineGetter__("test",function(){}),t={}}catch(e){t=document.createElement("div")}for(e=0;e<l;e++)if((r=n[e])&&r.name&&/^data-\w[\w\-]*$/.test(r.name)){i=r.value,o=r.name,a=o.substr(5).replace(/-./g,d);try{Object.defineProperty(t,a,{enumerable:this.enumerable,get:p.bind(i||""),set:c.bind(s,o)})}catch(e){t[a]=i}}return t}};try{Object.defineProperty(Element.prototype,"dataset",propDescriptor)}catch(e){propDescriptor.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",propDescriptor)}}"document"in self&&!("classList"in document.createElement("_"))&&function(e){"use strict";if("Element"in e){var t=e.Element.prototype,i=Object,o=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array.prototype.indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},n=function(e){for(var t=o.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],a=0,r=i.length;a<r;a++)this.push(i[a]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=n.prototype=[],d=function(){return new n(this)};if(r.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==s(this,e)},l.add=function(){var e,t=arguments,i=0,o=t.length,a=!1;do{e=t[i]+"",-1===s(this,e)&&(this.push(e),a=!0)}while(++i<o);a&&this._updateClassName()},l.remove=function(){var e,t=arguments,i=0,o=t.length,a=!1;do{e=t[i]+"";var r=s(this,e);-1!==r&&(this.splice(r,1),a=!0)}while(++i<o);a&&this._updateClassName()},l.toggle=function(e,t){e+="";var i=this.contains(e),o=i?!0!==t&&"remove":!1!==t&&"add";return o&&this[o](e),!i},l.toString=function(){return this.join(" ")},i.defineProperty){var p={get:d,enumerable:!0,configurable:!0};try{i.defineProperty(t,"classList",p)}catch(e){-2146823252===e.number&&(p.enumerable=!1,i.defineProperty(t,"classList",p))}}else i.prototype.__defineGetter__&&t.__defineGetter__("classList",d)}}(self),function(e,t){"use strict";var i=function(){var t=e.createElement("dummy").style,i="Webkit Moz ms Khtml".split(" "),o={};return function(e){if(void 0===o[e]){var a=e.charAt(0).toUpperCase()+e.substr(1),r=(e+" "+i.join(a+" ")+a).split(" ");o[e]=null;for(var s in r)if(void 0!==t[r[s]]){o[e]=r[s];break}}return o[e]}}(),o=function(e){return[].slice.call(e)},a=function(e,t){var o,a;for(o in t)t.hasOwnProperty(o)&&null!==(a=i(o))&&(e.style[a]=t[o]);return e},r=function(e,t){return isNaN(e)?t||0:Number(e)},s=function(t){return e.getElementById(t)},n=function(t,i){return i=i||e,i.querySelector(t)},l=function(t,i){return i=i||e,o(i.querySelectorAll(t))},d=function(t,i,o){var a=e.createEvent("CustomEvent");a.initCustomEvent(i,!0,!0,o),t.dispatchEvent(a)},p=function(e){return" translate3d("+e.x+"px,"+e.y+"px,"+e.z+"px) "},c=function(e,t){var i=" rotateX("+e.x+"deg) ",o=" rotateY("+e.y+"deg) ",a=" rotateZ("+e.z+"deg) ";return t?a+o+i:i+o+a},h=function(e){return" scale("+e+") "},u=function(e){return" perspective("+e+"px) "},m=function(){return s(t.location.hash.replace(/^#\/?/,""))},f=function(e){var i=t.innerHeight/e.height,o=t.innerWidth/e.width,a=i>o?o:i;return e.maxScale&&a>e.maxScale&&(a=e.maxScale),e.minScale&&a<e.minScale&&(a=e.minScale),a},v=e.getElementsByTagName("html")[0],g=navigator.userAgent.toLowerCase(),y=null!==i("perspective")&&v.classList&&v.dataset&&-1===g.search(/(ipod)/);y?(v.classList.remove("impress-not-supported"),v.classList.add("impress-supported")):v.className+=" impress-not-supported ";var C,b={},w={width:280,height:140,maxScale:1,minScale:0,perspective:1e3,transitionDuration:1500};(t.impress=function(i){if(i=i||"impress",b["impress-root-"+i])return b["impress-root-"+i];var g={},y=null,x=null,M=null,$=null,I=null,k=s(i),S=e.createElement("div"),T=!1,E=null,L=function(e){E!==e&&(d(e,"impress:stepenter"),E=e)},_=function(e){E===e&&(d(e,"impress:stepleave"),E=null)},O=function(e,t){var i=e.dataset,o={translate:{x:r(i.x),y:r(i.y),z:r(i.z)},rotate:{x:r(i.rotateX),y:r(i.rotateY),z:r(i.rotateZ||i.rotate)},scale:r(i.scale,1),el:e};e.id||(e.id="step-"+(t+1)),g["impress-"+e.id]=o,a(e,{position:"absolute",transform:"translate(-50%,-50%)"+p(o.translate)+c(o.rotate)+h(o.scale),transformStyle:"preserve-3d"})},P=function(){if(!T){var t=n("meta[name='viewport']")||e.createElement("meta");t.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no",t.parentNode!==e.head&&(t.name="viewport",e.head.appendChild(t));var s=k.dataset;$={width:r(s.width,w.width),height:r(s.height,w.height),maxScale:r(s.maxScale,w.maxScale),minScale:r(s.minScale,w.minScale),perspective:r(s.perspective,w.perspective),transitionDuration:r(s.transitionDuration,w.transitionDuration)},I=f($),o(k.childNodes).forEach(function(e){S.appendChild(e)}),k.appendChild(S),e.documentElement.style.height="100%",a(e.body,{height:"100%",overflow:"hidden"});var p=navigator.userAgent.match(/msie/i)||navigator.userAgent.match(/trident/i)?"fixed":"absolute",c={position:p,transformOrigin:"top left",transition:"all 0s ease-in-out",transformStyle:"preserve-3d"};a(k,c),a(k,{top:"50%",left:"50%",transform:u($.perspective/I)+h(I)}),a(S,c),e.body.classList.remove("impress-disabled"),e.body.classList.add("impress-enabled"),M=l(".step",k),M.forEach(O),x={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1},T=!0,d(k,"impress:init",{api:b["impress-root-"+i]})}},z=function(e){return"number"==typeof e?e=e<0?M[M.length+e]:M[e]:"string"==typeof e&&(e=s(e)),e&&e.id&&g["impress-"+e.id]?e:null},R=null,D=function(i,o){if(!T||!(i=z(i)))return!1;t.scrollTo(0,0);var s=g["impress-"+i.id];y&&(y.classList.remove("active"),v.classList.remove("impress-on-"+y.id)),i.classList.add("active");var n={rotate:{x:-s.rotate.x,y:-s.rotate.y,z:-s.rotate.z},translate:{x:-s.translate.x,y:-s.translate.y,z:-s.translate.z},scale:1/s.scale},l=n.scale>=x.scale;o=r(o,$.transitionDuration);var m=o/2;i===y&&(I=f($));var C=n.scale*I;return y&&y!==i&&_(y),a(k,{transform:u($.perspective/C)+h(C),transitionDuration:o+"ms",transitionDelay:(l?m:0)+"ms"}),a(S,{transform:c(n.rotate,!0)+p(n.translate),transitionDuration:o+"ms",transitionDelay:(l?0:m)+"ms"}),(x.scale===n.scale||x.rotate.x===n.rotate.x&&x.rotate.y===n.rotate.y&&x.rotate.z===n.rotate.z&&x.translate.x===n.translate.x&&x.translate.y===n.translate.y&&x.translate.z===n.translate.z)&&(m=0),d(e.body,"slideChanged",{totalTransitionDuration:o+m}),x=n,y=i,t.clearTimeout(R),R=t.setTimeout(function(){L(y)},o+m),i},A=function(){var e=M.indexOf(y)-1;return e=e>=0?M[e]:M[M.length-1],D(e)},N=function(e){var t=M.indexOf(y)+1;return t=t<M.length?M[t]:M[0],D(t)};return k.addEventListener("impress:init",function(){M.forEach(function(e){e.classList.add("future")}),k.addEventListener("impress:stepenter",function(e){e.target.classList.remove("past"),e.target.classList.remove("future"),e.target.classList.add("present")},!1),k.addEventListener("impress:stepleave",function(e){e.target.classList.remove("present"),e.target.classList.add("past")},!1)},!1),k.addEventListener("impress:init",function(){var e="";k.addEventListener("impress:stepenter",function(i){t.location.hash=e="#/"+i.target.id},!1),C&&t.removeEventListener("hashchange",C),t.addEventListener("hashchange",C=function(i){var o=i.newURL||location.hash;o.substring(o.lastIndexOf("#/"));t.location.hash!==e&&D(m())},!1),D(m()||M[0],0)},!1),e.body.classList.add("impress-disabled"),b["impress-root-"+i]={init:P,goto:D,next:N,prev:A}}).supported=y}(document,window),function(e,t){"use strict";var i,o,a=!1;e.addEventListener("impress:init",function(r){a&&(e.removeEventListener("keydown",i),e.removeEventListener("keyup",o),e.removeEventListener("click",void 0),e.removeEventListener("click",void 0),e.removeEventListener("touchstart",void 0),t.removeEventListener("resize",void 0)),a=!0;var s=r.detail.api;e.addEventListener("keydown",i=function(e){(9===e.keyCode||e.keyCode>=32&&e.keyCode<=34||e.keyCode>=37&&e.keyCode<=40)&&e.preventDefault()},!1),e.addEventListener("keyup",o=function(e){if(9===e.keyCode||e.keyCode>=32&&e.keyCode<=34||e.keyCode>=37&&e.keyCode<=40){switch(e.keyCode){case 33:case 37:case 38:s.prev();break;case 9:case 32:case 34:case 39:case 40:s.next()}e.preventDefault()}},!1)},!1)}(document,window),window.setTimeout(function(){window.scrollTo(0,1)},100);var ImpressController=function(e,t){var i=!1,o=this;o.itemClass="item",o.itemSelector="."+o.itemClass,o.items=[],o.props={},o.impressStarted=!1;var a=0;o.updatedMobileViewportSize=!1,this.resize=_.debounce(_.bind(this._resize,this),200),ImpressController.super_.apply(this,arguments),$("html *").on("click",function(e){e.stopPropagation()}),$(o.el).on("click",".image",function(e){var t=$(this).closest(o.itemSelector).index();o.itemClick(o.items[t],t,e)}),$(o.el).on("click",".more",function(e){var t=$(this).closest(o.itemSelector).index(),i=o.items[t];o.openLink(i.href,e.target,i.linkType,e,void 0,void 0,i.link)}),$(o.el).on("click",".page",function(){if(!i){var e=$(this).attr("hash");e&&(o.autoplayPause(),document.location.hash=e,setTimeout(function(){o.autoplayResume()},1e3))}}),$(o.el).on("click",".next",function(){i||(o.autoplayPause(),impress(o.impressId).next(),setTimeout(function(){o.autoplayResume()},1e3))}),$(o.el).on("click",".prev",function(){i||(o.autoplayPause(),impress(o.impressId).prev(),setTimeout(function(){o.autoplayResume()},1e3))}),o.activeIndex=$(".active").attr("data-index"),document.body.addEventListener("slideChanged",function(e){if(!i){var t=$(".active").attr("data-index")!==o.activeIndex;i=!0,setTimeout(function(){i=!1,t&&Wix.pushState(JSON.stringify({cmd:"itemChanged",args:[parseInt(o.activeIndex,10)-1]}))},2e3),t&&(o.leavingSlideIndex=o.activeIndex,o.activeIndex=$(".active").attr("data-index"),$('.step[data-index="'+o.activeIndex+'"]').fadeIn(2e3),$('.step[data-index="'+o.leavingSlideIndex+'"]').removeClass("hide").show().stop().fadeOut(1500));var r=$('.step[data-index="'+o.activeIndex+'"]'),s=$(".details",r).height(),n=$(window).height()-100,l=Math.floor((n-s)/2);if($(".details",r).css({top:l}),$(".page").each(function(e){$(this).removeClass("page-active").addClass("page-inactive")}),$("span[data-index='"+o.activeIndex+"']").removeClass("page-inactive").addClass("page-active"),o.el.css("background",utils.hexToRgba(o.bgColor[(o.activeIndex-1)%5].color,o.bgColor[(o.activeIndex-1)%5].alpha)),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){o.leavingSlideIndex||(o.leavingSlideIndex=o.activeIndex);new Number(RegExp.$1)<11&&$("#leavingBg").css("background",utils.hexToRgba(o.bgColor[(o.leavingSlideIndex-1)%5].color,o.bgColor[(o.leavingSlideIndex-1)%5].alpha)).show().stop().fadeOut(1500)}else clearTimeout(a),$(".item .more").css({top:"100px",opacity:0}),a=setTimeout(function(){$(".item .more").css({top:"0px",opacity:1})},e.detail.totalTransitionDuration+200)}}),$(document).on("keyup",function(e){(9==e.keyCode||e.keyCode>=32&&e.keyCode<=34||e.keyCode>=37&&e.keyCode<=40)&&(o.autoplayPause(),setTimeout(function(){o.autoplayResume()},1e3))})};utils.inherits(ImpressController,SimpleAppProto),ImpressController.prototype.itemClick=function(e,t,i){var o=this,a=parseInt(o.activeIndex,10)-1;switch(o.props.galleryImageOnClickAction){case"goToLink":(o.isMobile||$(window).width()<585)&&o.openLink(e.href,i.target,e.linkType,i,void 0,void 0,e.link);break;case"zoomMode":Wix.pushState(JSON.stringify({cmd:"zoom",args:[a]})),o.autoplayPause();break;case"disabled":default:Wix.pushState(JSON.stringify({cmd:"itemClicked",args:[a]}))}},ImpressController.prototype.zoomClosed=function(){this.autoplayResume()},ImpressController.prototype.next=function(){impress(this.impressId).next()},ImpressController.prototype.previous=function(){impress(this.impressId).prev()},ImpressController.prototype.createDom=function(){var e=this,t=e.getViewportSize();e.impressId=_.uniqueId("impress-"),e.el.width(t.width).height(t.height);$('<div id="leavingBg"></div>').appendTo(e.el).width(t.width).height(t.height).addClass("hide");e.displayNode=$("<div></div>").appendTo(this.el);var i=$("<div></div>").appendTo(e.el).addClass("pager");e.displayNode.attr("id",e.impressId).addClass("impress-display"),e.isMobile&&$(e.displayNode).attr("data-height",$(window).height()),_.each(this.items,function(t,o){var a=$("<div></div>").appendTo(e.displayNode),r=($("<div></div>").appendTo(a).addClass("image"),$("<div></div>").appendTo(a).addClass("details"));a.data("item",t).addClass(e.itemClass),$("<h3></h3>").appendTo(r).addClass("title").html(t.title),$("<div></div>").appendTo(r).addClass("desc").html(t.description),$("<div>Read more&nbsp;&nbsp;&nbsp;&nbsp;&gt;</div>").appendTo(r).addClass("more"),$("<span>•</span>").appendTo(i).attr("hash","#step-"+(o+1)).attr("data-index",o+1).addClass("page")});$('<div><div class="inner"></div></div>').appendTo(e.el).addClass("prev"),$('<div><div class="inner"></div></div>').appendTo(e.el).addClass("next")},ImpressController.prototype.updateLayout=function(){var e=this;if(e.isMobile&&0==e.updatedMobileViewportSize)t=$(window).width()>$(window).height()?screen.height-110:screen.width-110,i=$(window).width()>$(window).height()?screen.width-40:screen.height-40,e.updatedMobileViewportSize=!0,e._resize();else{var t,i,o,a=e.items.length,r=0,s=1,n=e.props.transition,l=e.props.textColor,d=e.props.textBackgroundColor,p=e.props.alphaTextBackgroundColor,c=0,h=0,u=0,m=0,f=0;if(!e.tmpStyleSheet){$("<style></style>").appendTo("head").attr("id","dynamic-style").get(0);for(var r=document.styleSheets.length-1;r>=0;r--){var v=document.styleSheets[r];if(null!=v.cssRules){e.tmpStyleSheet=v;break}}}if("random"==e.props.transition)for(var g=["1","2","3","4","5"],y=[],C=0;C<a;C++)y.push(g[Math.floor(5*Math.random())]);var b,w,x=e.tmpStyleSheet,M=0;x.insertRule?(M=x.cssRules.length,x.insertRule("#viewport .pager .page-inactive { color: "+d+"!important; opacity: "+p+";}",M),x.insertRule("#viewport .pager .page-active { color: "+l+"!important; opacity: "+p+";}",M+1),w=x.cssRules[M],b=x.cssRules[M+1]):x.addRule&&(M=x.rules.length,x.addRule("#viewport .pager .page-inactive","color: "+d+"; opacity: "+p+";",M),x.addRule("#viewport .pager .page-active","color: "+l+"; opacity: "+p+";",M+1),w=x.rules[M],b=x.rules[M+1]),w.style.color=d,w.style.opacity=p,b.style.color=l,b.style.opacity=p,utils.loadGoogleFontIfNeeded(e.props.font),$(e.itemSelector,e.el).find(".title").css({fontFamily:utils.fontFamilyDegradation(e.props.font),color:utils.hexToRgba(e.props.textColor,e.props.alphaTextColor)}),$(e.itemSelector,e.el).find(".desc").css({fontFamily:utils.fontFamilyDegradation(e.props.font),color:utils.hexToRgba(e.props.descriptionColor,e.props.alphaDescriptionColor)}),"goToLink"!==e.props.galleryImageOnClickAction?$(e.itemSelector,e.el).find(".more").css("display","none"):$(e.itemSelector,e.el).find(".more").css({display:"inline-block",fontFamily:utils.fontFamilyDegradation(e.props.font),color:e.props.textBackgroundColor,background:e.props.textColor}).hover(function(){$(this).css({color:e.props.textColor,background:e.props.textBackgroundColor})},function(){$(this).css({color:e.props.textBackgroundColor,background:e.props.textColor})}),e.activeIndex?e.el.css("background",utils.hexToRgba(e.bgColor[(e.activeIndex-1)%5].color,e.bgColor[(e.activeIndex-1)%5].alpha)):e.el.css("background",utils.hexToRgba(e.bgColor[0].color,e.bgColor[0].alpha)),e.isMobile?(t=Math.min(screen.width-42,$(window).width()-42),i=Math.min(screen.height,$(window).height()),$(".next, .prev").addClass("mobile")):(t=$(window).width()-200,i=$(window).height()-100,$(".next, .prev").removeClass("mobile")),t+200<585||0==e.props.showPagination||e.isMobile?($(".pager").addClass("hide"),$(".details").addClass("hide")):($(".pager").removeClass("hide"),$(".details").removeClass("hide")),!e.isMobile&&t+200<585&&$(".image").css("cursor","pointer"),"zoomMode"==e.props.galleryImageOnClickAction?$(".image").css("cursor","pointer"):$(".image").css("cursor",""),o=t+200<585?t:t/2,$(e.itemSelector,e.el).each(function(a){var l=$(this),d=$(".image",l),p=l.data("item"),v=p.width/p.height,g=0,C=0;if(navigator.userAgent.match(/msie/i)||navigator.userAgent.match(/trident/i)?n="none":"random"==e.props.transition&&(n=y[r]),$(".title",l).html(p.title),$(".desc",l).html(p.description),p.href||$(".more",l).css("display","none"),e.props.cropAndFitStage&&"crop"==e.props.cropAndFitStage)e.isMobile?p.width<=Math.floor(o)&&p.height<=i?(C=p.width>210?210:p.width,(g=Math.floor(3*p.width/4))>p.height&&(C=Math.floor(4*p.height/3),g=p.height)):(C=Math.floor(o)>210?210:Math.floor(o),(g=Math.floor(3*C/4))>=i&&(g=i,C=Math.floor(4*g/3))):p.width<=Math.floor(o)&&p.height<=i?(C=p.width,(g=Math.floor(3*p.width/4))>p.height&&(C=Math.floor(4*p.height/3),g=p.height)):(C=Math.floor(o),(g=Math.floor(3*C/4))>=i&&(g=i,C=Math.floor(4*g/3)));else{var b,w;e.isMobile?(Math.floor(o)/i>=4/3?(b=Math.floor(4*i/3)>210?210:Math.floor(4*i/3),w=i):(b=Math.floor(o)>210?210:Math.floor(o),w=Math.floor(3*o/4)),p.width<=b&&p.height<=w?(C=p.width,g=p.height):p.width>=p.height?(C=b,(g=Math.floor(C/v))>=w&&(g=w,C=Math.floor(g*v))):(g=w,(C=Math.floor(g*v))>=b&&(C=b,g=Math.floor(C/v)))):(Math.floor(o)/i>=4/3?(b=Math.floor(4*i/3),w=i):(b=Math.floor(o),w=Math.floor(3*o/4)),p.width<=b&&p.height<=w?(C=p.width,g=p.height):p.width>=p.height?(C=b,(g=Math.floor(C/v))>=w&&(g=w,C=Math.floor(g*v))):(g=w,(C=Math.floor(g*v))>=b&&(C=b,g=Math.floor(C/v))))}e.isMobile?d.css({left:Math.floor((t-C)/2)+"px"}):d.css({left:"auto",right:Math.floor((o-C)/2)+"px"});var x=utils.getResizedImageUrl(p.uri,C,g,{siteQuality:e.quality,maxWidth:p.width,maxHeight:p.height}),M=l[0];switch(n){case"none":break;case"1":h+=750,s=s<1?1:.3;break;case"2":c+=2e3*(1-r%2*2),h+=-500*(1-r%2*2),u+=3e3,f+=180;break;case"3":c+=-500*(1-r%2*2),u-=3e3,f-=180;break;case"4":c+=Math.floor(1500*Math.cos(m*Math.PI/180)+1e3*Math.sin(m*Math.PI/180)),u+=Math.floor(-1500*Math.sin(m*Math.PI/180)+1e3*Math.cos(m*Math.PI/180)),m+=45;break;case"5":var I=t/780;c+=Math.floor((-2500*Math.cos((m-45)*Math.PI/180)-1e3*Math.sin((m-45)*Math.PI/180))*I),u+=Math.floor((2500*Math.sin((m-45)*Math.PI/180)-1e3*Math.cos((m-45)*Math.PI/180))*I),m-=45}$(M).addClass("item step").attr("data-index",a+1).attr("data-modulus",a%5).attr("data-x",c).attr("data-y",h).attr("data-z",u).attr("data-scale",s).attr("data-rotate-x",0).attr("data-rotate-y",m).attr("data-rotate-z",f),r++,l.height(i).width(t);var k=$(".details",l),S=$(".desc",l),T=$(".title",l),E=$(".more",l);if(!e.isMobile&&t+200>=585)switch(e.props.textMode){case"titleAndDescription":$(".title,.desc,.details",l).removeClass("hide"),$(".more, .desc",l).removeClass("noTopMargin"),p.description||(S.addClass("hide"),E.removeClass("noTopMargin")),p.title||(T.addClass("hide"),S.addClass("noTopMargin"),E.removeClass("noTopMargin"));break;case"titleOnly":$(".title,.details",l).removeClass("hide"),S.addClass("hide"),E.removeClass("noTopMargin");break;case"descriptionOnly":$(".desc,.details",l).removeClass("hide"),T.addClass("hide"),S.addClass("noTopMargin"),E.removeClass("noTopMargin");break;case"noText":$(".title,.desc",l).addClass("hide"),E.addClass("noTopMargin")}var L=Math.floor((i-g)/2);d.height(g).width(C).css({backgroundImage:"url("+x+")",backgroundSize:"cover",top:L});var _=k.height(),O=Math.floor((i-_)/2);k.css({top:O}),l.addClass("hide")}),$('.step[data-index="'+e.activeIndex+'"]').fadeIn(2e3),impress(e.impressId).init(),e.activeSlide=$(".active").attr("id"),e.autoplayResume()}},ImpressController.prototype.changeEditMode=function(){var e=this;"editor"==e.editMode?e.autoplayPause():e.autoplayResume()},ImpressController.prototype.autoplayPause=function(){var e=this;clearInterval(e.autoplayId),e.autoplayId=null},ImpressController.prototype.autoplayResume=function(){var e=this,t=e.props.autoplayInterval>2?e.props.autoplayInterval:2;"editor"!=this.editMode&&1==e.props.autoplay&&(e.autoplayId=e.autoplayId||setInterval(function(){impress(e.impressId).next()},1e3*t))},ImpressController.prototype.updateSettings=function(config){var self=this,recreate=!1;self.bgColor=[],self.quality=config.quality||{},self.itemsChanged(config.items,["uri"])?recreate=!0:self.propsChanged(config.props,["transition","layoutSeed"])&&(recreate=!0),self.propsChanged(config.props,["transition","layoutSeed"])&&"site"!=self.editMode&&setTimeout(function(){impress(self.impressId).next()},2500),self.props.autoplay!==config.props.autoplay&&(config.props.autoplay?this.autoplayResume():this.autoplayPause()),recreate?(self.destroy(),self.items=config.items||[],self.props=config.props||{},self.createDom()):_.extend(self.props,config.props),$(self.el).css("text-align",self.props.alignText);for(var i=1;i<=5;i++)self.bgColor.push({color:eval("self.props.bcgColor"+i),alpha:eval("self.props.alphaBcgColor"+i)});self.updateLayout()},ImpressController.prototype.destroy=function(){this.el.html("")},ImpressController.prototype._resize=function(){var e=this;e.getViewportSize();e.destroy(),e.createDom(),e.updateLayout()},ImpressController.prototype.distributeSizes=function(){var e=this,t=[],i=e.items.length,o=0;Math.seedrandom("layout-seed-50");for(var a=0;a<i;a++){var r=Math.ceil(3*Math.random());o+=r,t.push(r)}return{item:t,sum:o}},ImpressController.prototype.getViewportSize=function(){var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}};