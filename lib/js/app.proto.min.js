function SimpleAppProto(a){var b=this;b.editMode=Wix.Utils.getViewMode(),b.deviceType=Wix.Utils.getDeviceType?Wix.Utils.getDeviceType():"desktop",b.isMobile="mobile"==b.deviceType,b.el=a,_.isFunction(b.updateSettings)||(b.updateSettings=function(){}),Wix.addEventListener(Wix.Events.SETTINGS_UPDATED,_.bind(b.handleSettingsEvent,b)),Wix.addEventListener(Wix.Events.EDIT_MODE_CHANGE,_.bind(b.handleEditModeEvent,b)),Wix.getSiteInfo(function(a){a&&a.url&&/editor.wix/.test(a.url)&&!/feedback=true/.test(a.url)?b.handleEditModeEvent({editMode:"editor"}):b.handleEditModeEvent({editMode:b.editMode})}),_.isFunction(b.destroy)&&Wix.addEventListener(Wix.Events.COMPONENT_DELETED,_.bind(b.destroy,b)),_.isFunction(b.navigate)&&Wix.addEventListener(Wix.Events.PAGE_NAVIGATION_CHANGE,_.bind(b.navigate,b)),_.isFunction(b.publish)&&Wix.addEventListener(Wix.Events.SITE_PUBLISHED,_.bind(b.publish,b)),_.isFunction(b.resize)&&$(window).on("resize",_.bind(b.resize,b)),Wix.pushState(JSON.stringify({cmd:"componentReady",id:Wix.Utils.getCompId()}))}function SimpleAppOverlay(a){var b=this;return b.overlay=$("<div></div>").appendTo("body"),b.el=a,b.hide(),b.overlay.on("click",function(){b.hide()}),b}SimpleAppProto.prototype.handleSettingsEvent=function(a){var b=this;a.cmd?_.isFunction(b[a.cmd])&&b[a.cmd].call(b,a):b.updateSettings(a)},SimpleAppProto.prototype.handleEditModeEvent=function(a){var b=this;b.editMode=a.editMode;var c=document.getElementById("viewport");c&&c.setAttribute("data-mode",b.editMode),_.isFunction(b.changeEditMode)&&b.changeEditMode(a)},SimpleAppProto.prototype.openLink=function(a,b,c,d,e,f){if(a){var g=this;switch(c){case"PAGE":Wix.navigateToPage(-1!==a.indexOf("#")?a.split("/").pop():f);break;case"ANCHOR":var h=-1!==a.indexOf("#")?a.split("/").pop():f;Wix.pushState(JSON.stringify({cmd:"navigateToAnchor",args:[h,e]}));break;case"WEBSITE":if(b?"_self"==b&&(b="_top"):b="_blank","preview"==this.editMode&&"_top"==b){var i="Your link will not open in the same window while in Preview mode, but it will work on your site!",j=$("<div></div>").append(i).css({letterSpacing:"1px",boxShadow:"rgba(0, 0, 0, 0.6) 0px 1px 4px 0px",borderRadius:"5px",maxWidth:"300px",color:"rgb(101, 101, 101)",background:"rgb(255, 254, 223)",position:"absolute",padding:"5px",fontSize:"12px",fontFamily:"Helvetica, Arial, serif",lineHeight:"16px"}),k={left:d.pageX,top:d.pageY};if(d.pageX&&d.pageY){var l=$("body").width();k.left-=150,k.left<1&&(k.left=1),k.top<1&&(k.top=1),k.left+300>l&&(k=l-300)}else k=d.currentTarget?$(d.currentTarget).offset():{left:10,top:10};g.viewportOverlay().show(j,5e3,k)}else window.open(a,b);break;case"EMAIL":window.open(a);break;case"DOCUMENT":window.open(a,"_blank")}}},SimpleAppOverlay.prototype.show=function(a,b,c){var d=this;d.overlay.show(),d.overlay.offset(d.el.offset());var e=$(d.el).css("z-index");return e&&"auto"!=e||(e=1,$(d.el).css("z-index",e)),e++,d.overlay.css({width:$("body").width(),height:$("body").height(),backgroundColor:"rgba(30,30,30, 0.1)",color:"rgb(50,50,50)",zIndex:e}),a&&d.message(a,c),b&&(d.displayTimer&&clearTimeout(d.displayTimer),d.displayTimer=setTimeout(function(){d.hide()},b)),d},SimpleAppOverlay.prototype.hide=function(){var a=this;return a.displayTimer&&clearTimeout(a.displayTimer),a.overlay.hide(),a.message(""),a},SimpleAppOverlay.prototype.message=function(a,b){var b=b||{left:10,top:10};if("string"==typeof a)this.overlay.html(a);else{var c=$(a),d=c.clone(!0);c.is("*")&&(this.overlay.html("").append(d),d.offset(b))}return this},SimpleAppProto.prototype.itemsChanged=function(a,b){var c=this,d=b||["uri"],e=!1;if(c.items.length!=a.length)e=!0;else for(var f=0;f<c.items.length;f++){if(utils.propertiesChanged(c.items[f],a[f],d)){e=!0;break}_.extend(c.items[f],a[f])}return e},SimpleAppProto.prototype.propsChanged=function(a,b){var c=this,b=b||[],d=utils.difference(c.props,a),e=!!_.keys(d).length;return e&&b.length&&(e=utils.propertiesChanged(c.props,a,b)),e},SimpleAppProto.prototype.viewportOverlay=function(){return this._viewportOverlay=this._viewportOverlay||new SimpleAppOverlay(this.el),this._viewportOverlay},SimpleAppProto.prototype.override=function(a,b){var c={};"object"==typeof a?c=a:c[a]=b,this.updateSettings({items:_.clone(this.items),props:_.extend(_.clone(this.props),c)})};
//# sourceMappingURL=app.proto.min.js.map